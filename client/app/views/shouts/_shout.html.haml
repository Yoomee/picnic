-if shout.attachable.is_a?(Link) && !shout.attachable.has_image? && !shout.attachable.url_error?
  -content_for :head do
    =javascript_tag("$(document).ready(function() {#{save_site_info_javascript(shout.attachable, :image_size => "150x125#")}});")
.shout.flcb{:id => "shout_#{shout.id}", :class => (show_member ? 'with_member_details' : 'without_member_details')}
  .shout_left
    .shout_left_inner.fl
      -if show_member
        =link_to image_for(shout.member, '70x'), shout.member, :class => "flcb"
        .shout_right_inner_details.fl
          =link_to_self shout.member
          =#link_to(pluralize(shout.comments.count, 'comment'), shout, :class => "shout_comments_link flcb")
      -else
        =link_to(pluralize(shout.comments.count, 'comment'), shout, :class => "shout_comments_link flcb")
  .shout_right
    .shout_right_inner
      .shout_text.flcb
        =read_more_truncate(shout.text, :length => 300)
      .shout_themes.themes_list.flcb
        %ul.lst
          -shout.tags.each do |tag|
            =link_to_tag(tag)
      -if shout.attachable
        .shout_images.flcb
          .shout_image{:class => "#{shout.attachable_type.underscore}_shout_image"}
            =render_shout_attachable(shout)
      .shout_ratings
        =render("shouts/ratings", :shout => shout) if shout.is_rateable?
    .shout_links.flcb
      =link_to_box_if_allowed("Edit", edit_shout_proc(shout))
      =link_if_allowed("Delete", shout, :method => :delete, :confirm => "Are you sure?")
      =link_to_function(WallPostsController::HELP_MESSAGE, "ShoutForm.showCommentForm($(this))", :class => "comment_prompt")
      =#link_to("View full post &rarr;", shout, :class => "shout_view_link")

    =render_shout_comments(shout) if shout.is_commentable? && !compact_view  
